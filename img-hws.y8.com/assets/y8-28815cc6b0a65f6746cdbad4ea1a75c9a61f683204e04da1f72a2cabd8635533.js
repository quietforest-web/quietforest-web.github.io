function renderFlashMessages(){$.each(["notice","alert"],function(i,flashType){var cookieName="flash-"+flashType,cookie=Cookies.get(cookieName);cookie&&($("#flash-"+flashType).html(cookie.replace(/\+/g," ")).fadeIn(),Cookies.remove(cookieName,{path:"/"}))}),delay(function(){$(".flash-messages-box").slideUp()},5e3),$(".flash-messages-box .close").click(function(e){e.preventDefault,$(".flash-messages-box").slideUp()})}function logConnectionError(request,fromWhere){fromWhere?fromWhere+=" ":fromWhere="",console.log("Connection error "+fromWhere+"(status: "+request.status+"): "+request.responseText)}function decodeHtml(html){return $("<textarea/>").html(html).text()}function initCollapsedSections(){$(".collapsed-section .collapsed-section-caption").click(function(){var collapsedSection=$(this).closest(".collapsed-section"),caption=$(this),content=collapsedSection.children(".collapsed-section-content");content.animate({opacity:"toggle",height:"toggle"},function(){var newIconText="";content.is(":visible")?(newIconText="[-]",collapsedSection.centerWindow(),collapsedSection.find(":input").filter(":first:visible").focus().select(),collapsedSection.trigger("collapsed-section.expand")):(newIconText="[+]",collapsedSection.trigger("collapsed-section.collapse")),caption.children(".collapsed-section-caption-icon").text(newIconText)})}).children(".collapsed-section-caption-icon").text("[+]")}function initMasterSlaveCheckBoxes(){$(".master-check-box").change(function(){var checkboxes=$(this).closest("form").find(":checkbox");$(this).is(":checked")?checkboxes.prop("checked",!0):checkboxes.prop("checked",!1)})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},jQuery.fn.start_spinner=function(){this.before('<div class="spinner" />')},jQuery.fn.stop_spinner=function(){this.parent().find(".spinner").remove()},jQuery.fn.centerWindow=function(){return this&&this.length&&$("html, body").scrollTop(this.offset().top-.61803399*($(window).height()-this.outerHeight())/1.61803399),this};var delay=function(){var timer=0;return function(callback,ms){clearTimeout(timer),timer=setTimeout(callback,ms)}}();!function($){"use strict";function AuthRequest(code){var $body=$("body");this.code=code,this.url=$body.data("authSuccessPath")}if("undefined"!=typeof window.IdnetHelpers)return!1;AuthRequest.prototype.perform=function(){return $.ajax(this.url,{dataType:"json",data:{code:this.code}}).done(function(){(new UserInfo).init()}),!0},$(window).on("id.init",function(){function receiveMessage(e){"idnetSilentLogin"==e.data&&window.location.origin&&e.origin!=window.location.origin&&window.IdnetHelpers.silentLogin()}window.IdnetHelpers={silentLogin:function(){if(Cookies.get("logged_in"))return!1;ID.getLoginStatus(function(response){try{var code=response.authResponse.code;if(code){var request=new AuthRequest(code);return Cookies.set("autologin","true",{path:"/"}),request.perform()}}catch(e){return!1}})}},window.addEventListener?window.addEventListener("message",receiveMessage,!1):window.attachEvent("onmessage",receiveMessage)})}(jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){function hidePagination(){$(".navigator").hide()}function hideSpinner(){$("#items_container .infinite-scroll-loading").remove()}function showSpinner(){$("#items_container").append('      <div class="item infinite-scroll-loading">        <div class="thumbarea"></div>        <div class="infos">Loading, please wait</div>      </div>    ')}function getQueryParam(field){var regexp=new RegExp("[?&]"+field+"=([^&#]*)","i"),string=regexp.exec(window.location.href);return string?string[1]:null}function getInitialPage(){return parseInt(getQueryParam("page"))||1}function getOrder(){return getQueryParam("order")||"popularity"}function filterCurrentItems(){var $items=this.$container.find(".item"),seen=this.seen;$items.each(function(){var item_id=$(this).data("item-id");seen[item_id]=!0})}function requestNextPage(){this.$container.find(".item:visible").length<40&&!window.UserAgent.device.type&&nextPage.call(this)}function newPageLoaded(data){var $items=$(data).find(".item.thumb");hideSpinner(),$items.length<=0?(this.maxPage=this.currentPage,$("footer").show()):(this.appendContent($items),this.showSmoothThumbs($items),this.processing=!1,nextPageIfCloseToBottom.call(this))}function nextPage(){var _this=this;return!this.processing&&(!(this.maxPage<=this.currentPage)&&(this.processing=!0,this.currentPage+=1,showSpinner(),void $.ajax({url:this.baseUrl,timeout:1e4,data:{order:this.currentOrder,page:this.currentPage},success:newPageLoaded.bind(this),error:function(xhr,textStatus){hideSpinner(),_this.processing=!1,404!=xhr.status&&ErrorHandler.sendReportFor(_this.url,xhr.status,"InfiniteScrollingXHR","",textStatus,"retrying-false")}})))}function nextPageIfCloseToBottom(){$(window).scrollTop()>$(document).height()-$(window).height()-250&&nextPage.call(this)}var InfiniteScrolling=function(){function InfiniteScrolling(container){var _this2=this;_classCallCheck(this,InfiniteScrolling),this.$container=$(container),this.baseUrl=this.$container.data("base-url"),this.seen={},this.currentPage=getInitialPage(),this.currentOrder=getOrder(),this.maxPage=parseInt(this.$container.data("max-page")),this.processing=!1,isNaN(this.maxPage)&&(this.maxPage=50),hidePagination.call(this),filterCurrentItems.call(this),requestNextPage.call(this),$(window).scroll(function(){nextPageIfCloseToBottom.call(_this2)}),nextPageIfCloseToBottom.call(this),this.showSmoothThumbs()}return _createClass(InfiniteScrolling,[{key:"filterItems",value:function(items){var seen=this.seen,$items=$(items).filter(function(){var elem=$(this),itemId=elem.data("item-id");return!seen[itemId]&&(seen[itemId]=!0,!0)});return $items.find("img.lazy").lazyload(),$items}},{key:"showSmoothThumbs",value:function(items){(null==items?$(".items-grid img"):$(items).find("img")).each(function(){$(this).load(function(){$(this).fadeIn("slow")}),this.complete&&$(this).trigger("load")})}},{key:"appendContent",value:function(items){this.filterItems(items).appendTo(this.$container),$(window).resize(),$(document).trigger("itemsListUpdated")}}]),InfiniteScrolling}();global.InfiniteScrolling=InfiniteScrolling}(window,jQuery),$.fn.infiniteScrolling=function(){return this.each(function(){new InfiniteScrolling(this)}),this},$(function(){$('[data-infinite-scrolling="true"][data-base-url]').infiniteScrolling()}),window.WebglDetector=function(){function support(){return!!window.WebGLRenderingContext&&(!!webglSupport()||!!experimentalWebglSupport())}function webglSupport(){try{return!!canvas.getContext("webgl")}catch(e){return!1}}function experimentalWebglSupport(){try{return!!canvas.getContext("experimental-webgl")}catch(e){return!1}}var canvas=document.createElement("canvas");return{support:support(),webglSupport:webglSupport(),experimentalWebglSupport:experimentalWebglSupport()}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),OSDetector=function(){function OSDetector(){_classCallCheck(this,OSDetector)}return _createClass(OSDetector,null,[{key:"architecture",value:function(){var footprints=["x86_64","x86-64","Win64","x64;","amd64","AMD64","WOW64","x64_64","OS X 10(.|_)[6-9]","OS X 10(.|_)[1-9][0-9]"],re=new RegExp(footprints.join("|"),"i");return null!=this.getUserAgent().match(re)?"64bit":"32bit"}},{key:"os",value:function(){var osNames={android:/.*(android).*/i,ios:/.*(iphone|ipod|ipad).*/i,windows:/.*(Win).*/i,osx:/.*(Mac).*/i,linux:/.*(Linux).*/i,unix:/.*(X11).*/i};for(var osName in osNames)if(osNames[osName].test(this.getAppVersion()))return osName;return"other"}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getAppVersion",value:function(){return window.navigator.appVersion}}]),OSDetector}();!function(){var os=OSDetector.os(),architecture=OSDetector.architecture();OSDetector.bit32="32bit"==architecture,OSDetector.bit64="64bit"==architecture,OSDetector.win="win"==os,OSDetector.linux="linux"==os,OSDetector.macOs="osx"==os,OSDetector.unix="unix"==os,OSDetector.android="android"==os,OSDetector.ios="ios"==os}(),window.BrowserSupport=function(){function safeCheck(meth){try{return meth()}catch(e){return console.log("Error with BrowserSupport check!!"),!0}}var support;return support={shockwave:safeCheck(function(){return"IE"==window.UserAgent.browser.name}),unityPlayer:safeCheck(function(){return"IE"==window.UserAgent.browser.name||"Safari"==window.UserAgent.browser.name||"Opera"==window.UserAgent.browser.name&&window.UserAgent.browser.version>35}),unityWebgl32:safeCheck(function(){return"mobile"==window.UserAgent.device.type?WebglDetector.support:WebglDetector.support&&OSDetector.bit32}),unityWebgl64:safeCheck(function(){return"mobile"==window.UserAgent.device.type?WebglDetector.support:WebglDetector.support&&OSDetector.bit64})},support.unity_player=support.unityPlayer,support.unity_webgl_32_bit=support.unityWebgl32,support.unity_webgl=support.unityWebgl64,support}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){"use strict";var Filter=function(){function Filter(item,labels){_classCallCheck(this,Filter),this.$item=$(item),this.labels=labels}return _createClass(Filter,[{key:"isFilterable",value:function(){var itemFilter=this.$item.data("filter");return!!this.filters.includes(itemFilter)}},{key:"isCompatible",value:function(){return 0==$(this.itemLabels()).filter(this.labels).length}},{key:"hide",value:function(){this.$item.hide().data("filter",this.filter).attr("data-filter",this.filter)}},{key:"show",value:function(){this.$item.show().removeData("filter").removeAttr("data-filter")}},{key:"itemLabels",value:function(){var labels=this.$item.data("label-ids");return labels==undefined||""==labels?[]:labels.split(",")}}]),Filter}();global.Filter=Filter}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,Filter){"use strict";function compatibilityFor(technology){var support=BrowserSupport[technology];return support==undefined||support}function arrFromDataAttr(attrName){return $.makeArray(this.$item.data(attrName))}function getTechnologies(){return arrFromDataAttr.call(this,"technologies")}var CompatibilityFilter=function(_Filter){function CompatibilityFilter(item,labels){_classCallCheck(this,CompatibilityFilter),_get(Object.getPrototypeOf(CompatibilityFilter.prototype),"constructor",this).call(this,item,labels),this.filter="compatibility",this.filters=["compatibility","parental","girls-games",undefined],this.technologies=getTechnologies.call(this)}return _inherits(CompatibilityFilter,_Filter),_createClass(CompatibilityFilter,[{key:"isCompatible",value:function(){if(this.technologies.length<1)return!0;for(var i=0;i<this.technologies.length;i++)if(compatibilityFor.call(this,this.technologies[i]))return!0;return!1}}],[{key:"perform",value:function(){$(".item").each(function(index,itemElement){var item=new CompatibilityFilter(itemElement);item.isCompatible()||item.hide()})}}]),CompatibilityFilter}(Filter);global.CompatibilityFilter=CompatibilityFilter}(window,jQuery,Filter),$(function(){$('body[data-filter-compatibility-games="true"]').each(function(){window.location.search.indexOf("noFlash=true")>-1&&(window.BrowserSupport.flash=!1),CompatibilityFilter.perform(),$(document).on("itemsListUpdated",function(){CompatibilityFilter.perform()})})});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,Filter){"use strict";var GirlsGamesFilter=function(_Filter){function GirlsGamesFilter(item,labels){_classCallCheck(this,GirlsGamesFilter),_get(Object.getPrototypeOf(GirlsGamesFilter.prototype),"constructor",this).call(this,item,labels),this.filter="girls-games",this.filters=["girls-games",undefined]}return _inherits(GirlsGamesFilter,_Filter),_createClass(GirlsGamesFilter,null,[{key:"perform",value:function(){var labels=GirlsGamesFilter.labels();$(".item").each(function(index,itemElement){var item=new GirlsGamesFilter(itemElement,labels);item.isFilterable()&&(item.isCompatible()?item.show():item.hide())})}},{key:"labels",value:function(){var labels=$("body").data("girls-labels");return labels===undefined||""==labels?[]:labels.split(",")}}]),GirlsGamesFilter}(Filter);global.GirlsGamesFilter=GirlsGamesFilter}(window,jQuery,Filter),$(function(){$(document).on("itemsListUpdated girlsGamesFilterUpdated",function(){GirlsGamesFilter.perform()})});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){"use strict";var defaultState="on",ToggleSwitch=function(){function ToggleSwitch(config){_classCallCheck(this,ToggleSwitch),this.cookie=config.cookie,this.$container=$(config.container),this.$container.addClass(this.state()),this.setCookie(this.state())}return _createClass(ToggleSwitch,[{key:"switch",value:function(){this.isOff()?this.on():this.off()}},{key:"on",value:function(){this.$container.removeClass("off"),this.$container.addClass("on"),this.setCookie("on")}},{key:"off",value:function(){this.$container.removeClass("on"),this.$container.addClass("off"),this.setCookie("off")}},{key:"setCookie",value:function(state){Cookies.set(this.cookie,state)}},{key:"state",value:function(){return Cookies.get(this.cookie)||defaultState}},{key:"isOff",value:function(){return"off"==this.state()}},{key:"isOn",value:function(){return"on"==this.state()}}]),ToggleSwitch}();global.ToggleSwitch=ToggleSwitch}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,ToggleSwitch){"use strict";function triggerGirlsGamesFilter(){$(document).trigger("girlsGamesFilterUpdated")}var girlsGamesLabels="Girl,Girls",GirlsGamesSwitcher=function(_ToggleSwitch){function GirlsGamesSwitcher(container){_classCallCheck(this,GirlsGamesSwitcher),_get(Object.getPrototypeOf(GirlsGamesSwitcher.prototype),"constructor",this).call(this,{container:container,cookie:"girls_games_filter"}),this.isOn()?GirlsGamesSwitcher.setLabels(""):GirlsGamesSwitcher.setLabels(girlsGamesLabels),triggerGirlsGamesFilter.call()}return _inherits(GirlsGamesSwitcher,_ToggleSwitch),_createClass(GirlsGamesSwitcher,[{key:"on",value:function(){_get(Object.getPrototypeOf(GirlsGamesSwitcher.prototype),"on",this).call(this),GirlsGamesSwitcher.setLabels("")}},{key:"off",value:function(){_get(Object.getPrototypeOf(GirlsGamesSwitcher.prototype),"off",this).call(this),GirlsGamesSwitcher.setLabels(girlsGamesLabels)}},{key:"switch",value:function(){_get(Object.getPrototypeOf(GirlsGamesSwitcher.prototype),"switch",this).call(this),triggerGirlsGamesFilter.call()}}],[{key:"setLabels",value:function(labels){$("body").attr("data-girls-labels",labels).data("girls-labels",labels)}}]),GirlsGamesSwitcher}(ToggleSwitch);global.GirlsGamesSwitcher=GirlsGamesSwitcher}(window,jQuery,ToggleSwitch),$(function(){$(".toggle-switch.girls-games-filter").each(function(){var girlsGamesSwitcher=new GirlsGamesSwitcher(this);$(this).on("click",function(e){e.preventDefault(),girlsGamesSwitcher["switch"]()})})});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,Filter){"use strict";var ParentalFilter=function(_Filter){function ParentalFilter(item,labels){_classCallCheck(this,ParentalFilter),_get(Object.getPrototypeOf(ParentalFilter.prototype),"constructor",this).call(this,item,labels),this.filter="parental",this.filters=["parental","girls-games",undefined]}return _inherits(ParentalFilter,_Filter),_createClass(ParentalFilter,null,[{key:"perform",value:function(){var userLabels=ParentalFilter.userLabels();$(".item").each(function(index,itemElement){var item=new ParentalFilter(itemElement,userLabels);item.isFilterable()&&(item.isCompatible()?item.show():item.hide())}),$(document).trigger("girlsGamesFilterUpdated")}},{key:"userLabels",value:function(){var labels=$("body").data("parental-labels");return labels===undefined||""==labels?[]:labels.split(",")}}]),ParentalFilter}(Filter);global.ParentalFilter=ParentalFilter}(window,jQuery,Filter),$(function(){$(document).on("itemsListUpdated parentalFilterUpdated",function(){ParentalFilter.perform()})});var RenderFlashMessages=new function(){return{init:function(){$(document).ready(function(){$.each(["notice","alert"],function(i,flashType){var cookieName="flash-"+flashType,cookie=Cookies.get(cookieName);cookie&&($("#flash-"+flashType).html(cookie.replace(/\+/g," ")),Cookies.remove(cookieName,{path:"/"}),$(".flash-"+flashType).show())}),$(".flash-messages-box").delay(500).slideDown(),$(".flash-messages-box .close").delay(700).show(),"block"==$(".flash-notice").css("display")&&$(".flash-messages-box").delay(4e3).slideUp(),$(".flash-messages-box .close").click(function(e){e.preventDefault,$(".flash-messages-box").slideUp()})})}}};"undefined"==typeof require&&(window.require=function(){});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AccountMenu=function(){function AccountMenu(){_classCallCheck(this,AccountMenu),this.$element=$("#user_logged_in .links-container")}return _createClass(AccountMenu,[{key:"init",value:function(){$(document).on("user-info-ready",function(event,data){if(data&&null!=data){var port=80!=location.port?":"+location.port:"",properDomain=location.protocol+"//"+location.hostname+port,profilePath=properDomain+"/users/"+data.user_pid+"/"+data.username;$("#account-menu-link-profile").attr("href",profilePath),$("#account-menu-link-edit-profile").attr("href",data.edit_profile_url),$("#account-menu-link-games").attr("href",profilePath),$(".logout").click(function(){window.location.href="/logout"}),$("#account-menu-link-visited").click(function(e){window.location.href=$(e.currentTarget).attr("destination")});"1"===Cookies.get("_resh")?($("#account-menu-link-my-revenue").click(function(e){window.location.href=$(e.currentTarget).attr("destination")}),$("#account-menu-link-my-revenue").show()):$("#account-menu-link-my-revenue").parent().remove()}}),$(document).on("favorites-count",function(event,cnt){$(".js-favorites-count").text(cnt)}),$(document).on("topMenu.forceClose",this.close.bind(this))}},{key:"open",value:function(){this.$element.fadeToggle(200)}},{key:"close",value:function(){this.$element.is(":visible")&&this.$element.fadeOut(200)}}]),AccountMenu}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),BrowseMenu=function(){function BrowseMenu(){_classCallCheck(this,BrowseMenu),this.$element=$(".y8-navbar-right .browse-menu")}return _createClass(BrowseMenu,[{key:"init",value:function(){$(window).resize(this.close),$(document).on("topMenu.forceClose",this.close.bind(this))}},{key:"open",value:function(){this.$element.fadeToggle(200)}},{key:"close",value:function(){this.$element&&this.$element.is(":visible")&&this.$element.fadeOut(200)}}]),BrowseMenu}(),errorsCtn=0,ErrorHandler=new function(){var self={sendReportFor:function(url,message,scriptUrl,line){var dataError={url:url,browser:navigator.userAgent,referrer:document.referrer,message:message,script_url:scriptUrl,line:line,errors_ctn:errorsCtn};console.log("ErrorHandler: "+JSON.stringify(dataError))},onError:function(message,scriptUrl,line){if(++errorsCtn>10)return!1;if(Math.random()<.99)return!1;if(!scriptUrl)return!1;var matchStr=function(str,regexp){return void 0!==str&&str.match(regexp)};return!(matchStr(message,/Script error|Error loading script/)||matchStr(scriptUrl,/googlesyndication.com|facebook.net|mscimg.com|twitter.com|pinterest.com|chrome|mzcdn|resource:/)||matchStr(navigator.userAgent,/SMART\-TV|Symbian/))&&(self.sendReportFor(window.location.href,message,scriptUrl,line,"",""),!1)}};return self},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Header=function(){function Header(){_classCallCheck(this,Header),this.$navbar=$(".navbar"),this.$burgerMenu=$(".mobile-burger-menu .burger-btn"),
this.$searchInput=$(".navbar .navbar-form .form-control"),this.$searchBtn=$(".mobile-search-user-container .search-btn"),this.$closeSearchBtn=$(".navbar-form .close-search-form"),this.$profileBtn=$(".mobile-search-user-container .profile-btn"),this.$darkOverlay=$(".dark-overlay")}return _createClass(Header,[{key:"init",value:function(){$(document).scroll(this.scrollHandler.bind(this)),this.$burgerMenu.click(this.burgerHandler.bind(this)),this.$searchBtn.click(this.searchHandler.bind(this)),this.$closeSearchBtn.click(this.closeSearchHandler.bind(this)),this.$profileBtn.click(this.profileHandler.bind(this)),this.$darkOverlay.click(this.closeSearchHandler.bind(this))}},{key:"scrollHandler",value:function(){this.$burgerMenu.hasClass("open")&&$(document).scrollTop()>0?this.$navbar.addClass("fixed-navbar"):this.$navbar.removeClass("fixed-navbar")}},{key:"burgerHandler",value:function(){!this.$burgerMenu.hasClass("open")&&this.$navbar.hasClass("show-login-btns")&&this.$navbar.removeClass("show-login-btns"),this.$darkOverlay.removeClass("show"),this.$navbar.removeClass("show-search-form hide-search-icon show-user-info"),this.$burgerMenu.toggleClass("open"),this.$navbar.toggleClass("hide-user-icon show-login-btns show-mobile-header-block")}},{key:"searchHandler",value:function(){this.$burgerMenu.removeClass("open"),this.$navbar.removeClass("show-login-btns hide-user-icon show-user-info show-mobile-header-block"),this.$navbar.toggleClass("show-search-form hide-search-icon"),this.$searchInput.focus(),this.$darkOverlay.addClass("show")}},{key:"closeSearchHandler",value:function(){this.$navbar.removeClass("show-search-form hide-search-icon"),this.$darkOverlay.removeClass("show")}},{key:"profileHandler",value:function(){this.$navbar.hasClass("logged")?(this.closeSearchHandler(),this.$navbar.toggleClass("show-user-info")):(this.$darkOverlay.removeClass("show"),this.$burgerMenu.removeClass("open"),this.$navbar.removeClass("show-search-form hide-search-icon hide-user-icon"),this.$navbar.toggleClass("show-login-btns"))}}]),Header}();$(document).ready(function(){(new Header).init()});var ItemSearch={init:function(){$("#items-search-form").submit(function(){return"mobile"==window.UserAgent.device.type&&$(this).append('<input type="hidden" name="mobile" value="true" />'),!0}),"mobile"==window.UserAgent.device.type&&$(".mobile-search").css("display","block")}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Library=function(){function Library(){_classCallCheck(this,Library),this.bindButtons()}return _createClass(Library,[{key:"loadCounters",value:function(){$(document).on("library-counters-ready",function(event,data){data&&(Library.updateCounterHtml(data.visited_items,"#visited-items-count"),Library.updateCounterHtml(data.liked_items,"#liked-items-count"),Library.updateCounterHtml(data.recommended_items,"#recommended-items-count"))})}},{key:"showSidebarLinks",value:function(){(new UserInfo).isLoggedIn()&&($("#visited_items_link").show(),$("#liked_items_link").show())}},{key:"bindButtons",value:function(){$(".items-list").on("click",".delete-watched-video",function(e){e.preventDefault(),Library.remoteRequest("/profile/delete_visit",$(this).data("item-id"))}),$(document).on("click",".delete-upvote",function(){Library.remoteRequest("/profile/delete_upvote",$(this).data("item-id"))})}}],[{key:"updateCounterHtml",value:function(datum,htmlClass){var number=void 0!==datum?datum:0,kind=$(".animations-active").length?"videos":"games",kindTranslated=I18n.t("views.shared._header.sections."+kind);$(htmlClass).html(number+" "+kindTranslated)}},{key:"remoteRequest",value:function(url,itemId){$.ajax({url:url,data:{item_id:itemId},type:"POST",success:function(){$("#item_"+itemId).remove()},error:function(data){console.log(data)}})}}]),Library}(),LiveSearch=function(){var self={init:function(){if(0!=$("#q").size()){var results=!1,liveSearchTemplate=$("#live-search-template").html();$("#q").on("focus blur",function(){$(document).trigger("checkOverlayMenus")}),$("#q").autocomplete({minLength:3,select:function(event,ui){ui.item.name&&window.location.assign(self.itemUrl(ui.item))},focus:function(event,ui){event.preventDefault(),null!=ui.item.name?$("#q").val(ui.item.name):$("#q").val($("#q").data("initial-input"))},source:function(request,response){var params={q:request.term,kind:self.kind()};$.getJSON("/search.json",params,function(data){$("body").addClass("search-list"),$("ul.live-search-results").html(""),data.items.length>0?(results=!0,response(data.items)):(results=!1,response(data.featured))})},response:function(event,ui){!results&&ui.content&&ui.content.unshift({name:null})}}).data("ui-autocomplete")._renderItem=function(ul,item){if(!item.name){var div=$("<div>").addClass("no-results").text("Nothing was found, how about those great full games:"),userInput=$("#q").val();return $("#q").data("initial-input",userInput),$("<li>").data("empty",null).append(div).appendTo(ul)}item.path=self.itemUrl(item);var $li=$(Handlebars.compile(liveSearchTemplate)(item)),resContainer=ul;return $(".live-search-results").length&&(resContainer=$(".live-search-results"),resContainer.trigger("liveSearchResultsRendered"),resContainer.show()),$li.appendTo(resContainer)}}},kind:function(){return $("#kind").length?$("#kind").val():"game"},kindForUrl:function(kind){return"game"==kind&&(kind+="s"),kind},itemUrl:function(item){return"/"+self.kindForUrl(item.kind)+"/"+item.slug}};return self}(),LocaleSelector={init:function(){var _this=this;$(document).ready(function(){_this.handleClick(),$("#locale-selector-dropdown .locales-container .locale-link."+window.appInfo.currentLocale).addClass("selected"),$(".locale-link").click(function(){Cookies.set("_y8_lang",$(this).attr("class").match(/(?:^| )([^ ]{2})(?: |$)/)[1],$.extend(appInfo.commonCookieOptions,{expires:999}));var locale_selector_dropdown=$(this).closest("#locale-selector-dropdown");locale_selector_dropdown.length&&(locale_selector_dropdown.find(".locale-chooser").html($(this).html()),path=document.location.pathname+document.location.search,this.href=this.href.replace(/((https?:\/\/)?[^\/]+).*/,"$1"+path),$(document).trigger("checkOverlayMenus"))})}),$(document).on("topMenu.forceClose",this.close)},open:function(){$("#locale-selector-dropdown .locales-container").fadeToggle(200)},close:function(){$("#locale-selector-dropdown .locales-container").fadeOut(200)},handleClick:function(){$("#locale-selector-dropdown .locale-chooser").not(".js-top-menu").click(function(event){$("#locale-selector-dropdown .locales-container").toggle(),$(document).trigger("checkOverlayMenus"),event.preventDefault(),event.stopPropagation()})}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NewGamesMenu=function(){function NewGamesMenu(){_classCallCheck(this,NewGamesMenu),this.$element=$(".y8-navbar-right .newgames-menu")}return _createClass(NewGamesMenu,[{key:"init",value:function(){$(window).resize(this.close),$(document).on("topMenu.forceClose",this.close.bind(this))}},{key:"open",value:function(){this.$element.fadeToggle(200)}},{key:"close",value:function(){this.$element&&this.$element.is(":visible")&&this.$element.fadeOut(200)}}]),NewGamesMenu}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NotificationManager=function(){function NotificationManager(){_classCallCheck(this,NotificationManager),this.$box=$(".notification-manager"),this.$hideButton=$(".notification-manager .actions .hide-notification"),this.$browseBubble=$(".y8-navbar-right .browse .with-notification"),this.cookieValue="notification_forum"}return _createClass(NotificationManager,[{key:"process",value:function(){this.isHidden()||this.show()}},{key:"show",value:function(){var _this=this;this.$box.show(),this.$hideButton.click(function(event){event.preventDefault(),_this.hide()})}},{key:"hide",value:function(){this.$box.hide(),this.$browseBubble.hide(),Cookies.set(this.cookieValue,!0,this.cookieOptions())}},{key:"isHidden",value:function(){return"true"==Cookies.get(this.cookieValue)}},{key:"cookieOptions",value:function(){return window.appInfo.commonCookieOptions}}]),NotificationManager}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ParentalControl=function(){function ParentalControl(){_classCallCheck(this,ParentalControl)}return _createClass(ParentalControl,[{key:"open",value:function(){$(".parental-control-link-hidden").click()}},{key:"close",value:function(){$("#parental-filter-form").fadeOut(200)}},{key:"initForm",value:function(){var _this=this;$("#parental_filter_label_ids").chosen(),$(".show-update-control").click(function(e){e.preventDefault(),_this.showControlForm(),$(document).trigger("checkOverlayMenus")}),$(".show-update-password").click(function(e){e.preventDefault(),_this.showPasswordForm(),$(document).trigger("checkOverlayMenus")}),this.dealWithOnOffSwitch(),$("form.update-control input, span.onoffswitch-inner").on("change select",function(){$("#parental-filter-flash").fadeOut(200)})}},{key:"setupDataFromCookie",value:function(){if(Cookies.get("parental_filter_v1")&&Cookies.get("parental_labels_v1"))return $("body").data("parental-filter",Cookies.get("parental_filter_v1")),ParentalControl.setLabels(this.labels(),Cookies.get("parental_filter_v1")),void $(document).trigger("parentalFilterUpdated");$.ajax({url:"/ajax/parental_filter",error:function(request){logConnectionError(request,"in showParentalData")},success:function(data){data&&data.parental_filter&&($("body").data("parental-filter",data.parental_filter),ParentalControl.setLabels(data.parental_labels.join(","),data.parental_filter),$(document).trigger("parentalFilterUpdated"))}})}},{key:"showPasswordForm",value:function(){$(".update-control").hide(),$(".update-password").show()}},{key:"showControlForm",value:function(){$(".update-control").show(),$(".update-password").hide()}},{key:"dealWithOnOffSwitch",value:function(){$(".onoffswitch-inner").click(function(){$(".parental_filter_labels").toggle()})}},{key:"labels",value:function(){return Cookies.get("parental_labels_v1").replace(/\+/g," ")}}],[{key:"setLabels",value:function(labels,filter){"false"==filter&&(labels=""),$("body").data("parental-labels",labels)}}]),ParentalControl}();$(document).ready(function(){window.parentalControl=new ParentalControl,parentalControl.setupDataFromCookie(),$(document).on("topMenu.forceClose",window.parentalControl.close)});var PluginManager=function PluginManager(){if(_classCallCheck(this,PluginManager),"IE"==window.UserAgent.browser.name){var $object=$(".item-container").find("object"),$parentMenu=($(".content"),$(".parental-filter-form")),$localeMenu=$(".locales-container");$(document).on("checkOverlayMenus",function(){var searchOpen=$("#q").is(":focus"),parentOpen=""!=$parentMenu.html(),localeOpen="none"!=$localeMenu.css("display"),browseOpen=$(".browse-menu").is(":visible");searchOpen||parentOpen||localeOpen||ID.isVisible()||browseOpen?hideGame():showGame()});var showGame=function(){$object.css("visibility","visible")},hideGame=function(){$object.css("visibility","hidden")}}};$(function(){new PluginManager});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PolicyValidator=function(){function PolicyValidator(){_classCallCheck(this,PolicyValidator),this.$informationBar=$(".policy-validation"),this.$button=$(".policy-validation .actions .validate-policy"),this.serviceControl=null}return _createClass(PolicyValidator,[{key:"process",value:function(){var _this=this;return"true"==Cookies.get("privacy_policy_validated")?void(!this.serviceControl&&Cookies.get("user_id")&&this.validateWithApi()):this.serviceControl?void this.validateWithCookie():(this.showInformationBar(),void this.$button.click(function(event){event.preventDefault(),_this.validate()}))}},{key:"validate",value:function(){Cookies.get("user_id")?this.validateWithApi():this.validateWithCookie()}},{key:"validateWithCookie",value:function(){Cookies.set("privacy_policy_validated",!0,this.cookieOptions()),this.hideInformationBar()}},{key:"validateWithApi",value:function(){var _this2=this;$.ajax({type:"PUT",url:"/profile/validate_privacy_policy",success:function(){_this2.validateWithCookie()},error:function(data){console.log(data)}})}},{key:"showInformationBar",value:function(){this.$informationBar.show()}},{key:"hideInformationBar",value:function(){this.$informationBar.hide()}},{key:"setControlValueFromService",value:function(serviceControlValue){this.serviceControl=serviceControlValue}},{key:"cookieOptions",value:function(){var expires={expires:36500,expirationDate:Math.floor(Date.now()/1e3)+365e5,name:"policy"};return Object.assign(_extends({},expires),window.appInfo.commonCookieOptions)}}]),PolicyValidator}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),RecaptchaV3=function(){function RecaptchaV3(){_classCallCheck(this,RecaptchaV3),this.reset.bind(this),this.triggerAction.bind(this),this.clientId}return _createClass(RecaptchaV3,[{key:"embedSDK",value:function(){return regeneratorRuntime.async(function(context$2$0){for(;;)switch(context$2$0.prev=context$2$0.next){case 0:return context$2$0.abrupt("return",new Promise(function(resolve){var script=document.createElement("script");script.onload=function(){return resolve("resolved")},script.src="https://www.google.com/recaptcha/api.js?render=explicit",document.head.appendChild(script)}));case 1:case"end":return context$2$0.stop()}},null,this)}},{key:"triggerAction",value:function(action){var element=arguments.length<=1||arguments[1]===undefined?"inline-badge":arguments[1];return regeneratorRuntime.async(function(context$2$0){for(var _this2=this;;)switch(context$2$0.prev=context$2$0.next){case 0:return context$2$0.abrupt("return",new Promise(function(resolve){return regeneratorRuntime.async(function(context$3$0){for(var _this=this;;)switch(context$3$0.prev=context$3$0.next){case 0:return context$3$0.next=2,regeneratorRuntime.awrap(this.embedSDK());case 2:window.grecaptcha.ready(function(){try{_this.clientId=window.grecaptcha.render(element,{sitekey:_this.siteKey(),badge:"inline",size:"invisible"})}catch(e){console.log(e)}var options={action:action};window.grecaptcha.execute(_this.clientId,options).then(function(token){var $form=$("form");$form.length&&($form.append('<input type="hidden" name="g-recaptcha-response" value="'+token+'">'),$form.append('<input type="hidden" name="g-recaptcha-action" value="'+action+'">')),window.recaptchaV3Token=token,resolve(token)})});case 3:case"end":return context$3$0.stop()}},null,_this2)}));case 1:case"end":return context$2$0.stop()}},null,this)}},{key:"reset",value:function(){window.grecaptcha.reset(),window.recaptchaV3Token=null;var $form=$("form");$form.length&&($form.remove('input[name ="g-recaptcha-response"]'),$form.remove('input[name ="g-recaptcha-action"]'))}},{key:"siteKey",value:function(){return window.appInfo.recaptchaV3SiteKey}}]),RecaptchaV3}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){function currentKind(){return global.appInfo.currentKind}function currentTime(){return new Date}function domElement(){return $(".release-countdown")}var ReleaseTimer=function(){function ReleaseTimer(){_classCallCheck(this,ReleaseTimer)}return _createClass(ReleaseTimer,[{key:"display",value:function(){var _this=this,$domElement=domElement();setInterval(function(){var nowTime=currentTime(),distance=_this.timeForNextRelease(nowTime)-nowTime;if(distance<0)$domElement.html("00:00");else{var days=Math.floor(distance/864e5),hours=Math.floor(distance%864e5/36e5),minutes=Math.floor(distance%36e5/6e4),seconds=Math.floor(distance%6e4/1e3);$domElement.html(_this.generateCountdown(days,hours,minutes,seconds))}},1e3)}},{key:"generateCountdown",value:function(days,hours,minutes,seconds){var countdown="";return days>0&&(countdown+=""+("0"+days).slice(-2)),hours>0&&(countdown+=("0"+hours).slice(-2)+":"),countdown+=("0"+minutes).slice(-2)+":",countdown+=""+("0"+seconds).slice(-2)}},{key:"timeForNextRelease",value:function(nowTime){var $domElement=domElement(),nextReleaseTime=new Date;if("game"==currentKind())var frequencyByHour=parseInt($domElement.data("game-frequency")),minutesOnHour=7;else var frequencyByHour=parseInt($domElement.data("animation-frequency")),minutesOnHour=8;nextReleaseTime.setUTCSeconds(0),nextReleaseTime.setUTCMinutes(minutesOnHour);var hourGap=nextReleaseTime.getUTCHours()%frequencyByHour;return 0==hourGap&&nowTime.getUTCMinutes()>minutesOnHour&&(hourGap=frequencyByHour),nextReleaseTime.setUTCHours(nextReleaseTime.getUTCHours()+hourGap),nextReleaseTime}}]),ReleaseTimer}();global.ReleaseTimer=ReleaseTimer}(window,jQuery),$(function(){(new ReleaseTimer).display()});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),SearchTracker=function(){function SearchTracker(){_classCallCheck(this,SearchTracker),this.endpoint="/tracking/search_query",this.searchForm=$("#items-search-form"),this.cookieName="_y8_srch",this.cookieExpiration=1,this.cookieDomain="."+window.location.hostname.split(".").slice(-2).join("."),this.cookieOptions={path:"/",domain:this.cookieDomain,expires:this.cookieExpiration},this.limitQueryLength=50}return _createClass(SearchTracker,[{key:"track",value:function(){var _this=this;this.syncCache(),this.searchForm.submit(function(event){var query=$(event.target).find("#q").val(),kind=$(event.target).find("#kind").val();return Cookies.set(_this.cookieName,_this.sanitize(query)+":"+kind,_this.cookieOptions),!0})}},{key:"syncCache",value:function(){var _this2=this,data=Cookies.get(this.cookieName);if(data){data=data.split(":");var query=this.sanitize(data[0]),kind=data[1];$.ajax({url:this.endpoint,type:"POST",data:{q:query,kind:kind}}).done(function(){return _this2.cleanCache()})}}},{key:"cleanCache",value:function(){Cookies.remove(this.cookieName,this.cookieOptions)}},{key:"sanitize",value:function(query){return query&&0!==query.length?query.toLowerCase().replace(/\s+/g," ").substring(0,this.limitQueryLength).trim():query}}]),SearchTracker}();$(function(){"requestIdleCallback"in window?requestIdleCallback(function(){return(new SearchTracker).track()}):setTimeout(function(){return(new SearchTracker).track()},1)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js");var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TopMenu=function(){function TopMenu(){_classCallCheck(this,TopMenu),this.currentlyOpen=null,this.$background=$(".header-menu-modal"),this.$topMenu=$(".js-top-menu")}return _createClass(TopMenu,[{key:"init",value:function(){this.initMenus(),this.$topMenu.on("click",this.onClick.bind(this))}},{key:"initMenus",value:function(){this.account=new AccountMenu,this.account.init(),this.browse=new BrowseMenu,this.browse.init(),this.newgames=new NewGamesMenu,this.newgames.init(),this.locale=LocaleSelector,this.locale.init(),this.parental=window.parentalControl}},{key:"onClick",value:function(event){event.preventDefault(),event.stopPropagation();var menu=$(event.currentTarget).data("menu");if(!this[menu])return void console.warn("Don't know how to handle such menu",menu);this.currentlyOpen!=menu?this.open(menu):this.close()}},{key:"open",value:function(menu){var _this=this;this.close(!0),this.$background.fadeIn(200),this[menu].open(),this.currentlyOpen=menu,$(document).trigger("checkOverlayMenus"),$(".sub-menu").bind("click.subMenu",function(event){event.stopPropagation()}),$(document).bind("click.outsideTopMenu",function(event){event.preventDefault(),event.stopPropagation(),_this.close()})}},{key:"close",value:function(ignoreBackground){$(document).trigger("topMenu.forceClose"),$(".sub-menu").unbind("click.subMenu"),$(document).unbind("click.outsideTopMenu"),this.currentlyOpen=null,1!=ignoreBackground&&this.$background.fadeOut(200),$(document).trigger("checkOverlayMenus")}}]),TopMenu}(),Tracking={init:function(){$("link[rel=alternate].xhr").each(function(){Tracking.trackVisit($(this).attr("href"))})},trackVisit:function(url){var data={};window.document.referrer&&(data.referer=document.referrer),window.adBlockDetected===undefined&&(data.ad_blocker=!0),jQuery.get(url,data)},trackThumbsDisplay:function(){var $items=$("[data-thumbnail-id]"),thumbnailIds=$.map($items,function(elem){return $(elem).data("thumbnail-id")});$items.length>0&&thumbnailIds.length>0&&$.post("/ctr/thumbnails_displayed",{"thumbnail_ids[]":thumbnailIds},function(hash){$items.each(function(){var thumbnailId=$(this).data("thumbnail-id");$(this).find("a").click(function(event){event.preventDefault(),window.location.href="/ctr/click_on_game?"+$.param({location:$(this).attr("href"),thumbnail_id:thumbnailId,hash:hash})})})}).fail(function(xhr,textStatus){ErrorHandler.sendReportFor(this.url,xhr.status,"CTRTracking","",textStatus,null)})},trackTog:function(){var $trackTog=$("#track-tog");if($trackTog.length){var togUrl=$trackTog.data("post-url");togUrl&&(window.addEventListener("visbilitychange",function(){"hidden"===document.visbilityState&&Tracking.sendTogRequest(togUrl)}),window.addEventListener("pagehide",function(){Tracking.sendTogRequest(togUrl)}))}},trackingIdPresent:function(){return"undefined"!=typeof trackingId&&!!trackingId},sendTogRequest:function(url){if(Tracking.trackingIdPresent()&&"sendBeacon"in navigator){var data=new FormData;data.append("tracking_id",trackingId),"undefined"!=typeof togUID&&togUID&&data.append("uid",togUID),navigator.sendBeacon(url,data)}}};window.Tracking=Tracking;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),UserCountryResolver=function(){function UserCountryResolver(){_classCallCheck(this,UserCountryResolver),this.endpoint="/ajax/user_c_info",this.cookieName="_y8_uci",this.cookieExpiration=7,this.cookieDomain="."+window.location.hostname.split(".").slice(-2).join(".")}return _createClass(UserCountryResolver,[{key:"resolve",value:function(force){var _this=this,deferred=$.Deferred();return this.country&&!force?(deferred.resolve(this.countryInfo(this.country)),deferred.promise()):(this.fetch().then(function(data){if(!Array.isArray(data)||!data.length)return deferred.reject("UCR failed: no data from server"),deferred.promise();var value=data.reverse().map(function(c){return String.fromCharCode(c)}).join("");Cookies.set(_this.cookieName,value,_this.cookieOptions()),deferred.resolve(_this.countryInfo(value))}).fail(function(jqXHR,textStatus,errorThrown){deferred.reject("UCR failed: "+errorThrown)}),deferred.promise())}},{key:"countryInfo",value:function(iso_alpha_2){return{code:iso_alpha_2,name:ISO_ALPHA_2_TO_COUNTRY_NAME_MAP[iso_alpha_2]}}},{key:"cookieOptions",value:function(){return{path:"/",domain:this.cookieDomain,expires:this.cookieExpiration}}},{key:"fetch",value:function(){return $.ajax({type:"GET",dataType:"json",url:this.endpoint,timeout:3e3})}},{key:"country",get:function(){return Cookies.get(this.cookieName)}}]),UserCountryResolver}(),ISO_ALPHA_2_TO_COUNTRY_NAME_MAP={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\xc5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"C\xf4te D'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KM:"Comoros",KN:"Saint Kitts And Nevis",KP:"Korea",KR:"Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"R\xe9union",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VC:"Saint Vincent And The Grenedines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},UserIdnetBonusTimer=new function(){var self={appId:null,init:function(){if(self.appId=$("body").data("idnet-app-id"),Cookies.get("logged_in")){if(self.appId)self.getPoints();else if(Cookies.get("user_pid")){var bonusValue=Cookies.get("idnet-bonus-score-value"),lastScore=Cookies.get("idnet-bonus-score-last-update")>Date.now()-18e5;bonusValue&&lastScore?self.updateUserInfo(Cookies.get("idnet-bonus-score-value")):self.getAllPoints(Cookies.get("user_pid"))}}else self.resetScoreWith(0)},getAllPoints:function(user_pid){if(undefined==user_pid)return!1;$.ajax({type:"GET",dataType:"jsonp",jsonpCallback:"cb",url:window.appInfo.accountServiceApiUrls.profilePointsTotalUrl.replace(":uid",user_pid),error:function(request){logConnectionError(request,"in getPointsFromIdnet")},success:function(response){response&&response.points&&self.updateUserInfo(response.points)}})},getPoints:function(){$.ajax({type:"GET",url:window.appInfo.accountServiceApiUrls.userUrl,xhrFields:{withCredentials:!0},dataType:"json",data:{app_id:self.appId},success:function(response){response&&response.points&&response.points>0&&self.updateUserInfo(response.points),"logged_in"in response&&"keys"in response&&1==response.logged_in&&(-1===$.inArray("1_hour_of_play",response.keys)?-1===$.inArray("10_minutes_of_play",response.keys)?setTimeout(function(){self.savePoints("10_minutes_of_play")},6e5):setTimeout(function(){self.savePoints("1_hour_of_play")},36e5):-1===$.inArray("10_minutes_of_play",response.keys)&&setTimeout(function(){
self.savePoints("10_minutes_of_play")},6e5))}})},savePoints:function(key){$.ajax({type:"POST",url:window.appInfo.accountServiceApiUrls.pointsBonusTimerUrl,xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:"json",data:{app_id:self.appId,key:key},success:function(response){"success"in response&&"finished"in response&&1==response.success&&0==response.finished?(self.getAllPoints(),setTimeout(function(){self.savePoints("1_hour_of_play")},3e6)):"success"in response&&1==response.success&&self.getAllPoints()}})},updateUserInfo:function(points){0==points||"0"==points?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(points),Cookies.set("idnet-bonus-score-last-update",Date.now(),appInfo.commonCookieOptions),Cookies.set("idnet-bonus-score-value",points,appInfo.commonCookieOptions)},resetScoreWith:function(newScore){0==newScore||"0"==points?$(".js-user-idnet-points").html("0"):$(".js-user-idnet-points").html(newScore),Cookies.remove("idnet-bonus-score-last-update",appInfo.commonCookieOptions),Cookies.remove("idnet-bonus-score-value",appInfo.commonCookieOptions)}};return self},UserAge={range:function(age){if(age<3||age>80)return null;var from=3*Math.floor(age/3);return from+" - "+(from+2)},fromDateOfBirth:function(dateOfBirth){var today=new Date,birthDate=new Date(dateOfBirth),age=today.getFullYear()-birthDate.getFullYear(),m=today.getMonth()-birthDate.getMonth();return(m<0||0===m&&today.getDate()<birthDate.getDate())&&age--,age}};window.UserInfo=function(){function UserInfo(){this.MAX_HEARTED_ITEMS=3}return UserInfo.prototype.init=function(){if(this.registerHandlers(),!Cookies.get("logged_in"))return this.showUserInfo(!1),$(document).trigger("library-counters-ready",[this.getLibraryCounters()]),void $(document).trigger("user-info-ready");var kind=$(".animations-active").length?"animations":"games";$.ajax({url:"/ajax/user",data:{kind:kind},error:function(request){return logConnectionError(request,"in showLoginData")},success:function(_this){return function(data){return _this.showUserInfo(data),_this.setCSRFTokenHeader(),$(document).triggerHandler("favorites-count",data.my_games_count),$(document).triggerHandler("hearts-count",data.hearts_count),$(document).trigger("library-counters-ready",[data]),$(document).trigger("user-info-ready",[data])}}(this)})},UserInfo.prototype.setCSRFTokenHeader=function(){return $.ajaxPrefilter(function(options,originalOptions,xhr){if(!options.crossDomain)return xhr.setRequestHeader("X-CSRF-Token",Cookies.get("gp-csrf-token"))})},UserInfo.prototype.getLibraryCounters=function(){var visitedIds,likedIds;$(".animations-active").length?(visitedIds=Cookies.get("watched_videos_ids"),likedIds=Cookies.get("liked_videos_ids")):(visitedIds=Cookies.get("played_games_ids"),likedIds=Cookies.get("liked_games_ids"));var result={visited_items:0,liked_items:0,recommended_items:0};return visitedIds&&(result.visited_items=JSON.parse(visitedIds).length,result.recommended_items=result.visited_items>15?200:14*result.visited_items),likedIds&&(result.liked_items=JSON.parse(likedIds).length),result},UserInfo.prototype.current_user_id=function(){return Cookies.get("user_id")},UserInfo.prototype.showEditButton=function(){var button;return button=$("#toggle-edit-"+this.current_user_id()),this.revealButton(button)},UserInfo.prototype.revealButton=function(button){return button.removeClass("hidden")},UserInfo.prototype.hideButton=function(button){return button.addClass("hidden")},UserInfo.prototype.isMyProfile=function(contact_id){return contact_id===Cookies.get("user_id")},UserInfo.prototype.isLoggedIn=function(){return Cookies.get("logged_in")},UserInfo.prototype.registerHandlers=function(){var _this=this;return $(document).on("favorites-count",function(e,cnt){_this.setFavoritesCount(cnt)}),$(document).on("hearts-count",function(e,cnt){_this.setHeartsCount(cnt)}),$(document).on("user-logged-in",$.proxy(this.showEditButton,this))},UserInfo.prototype.showUserInfo=function(data){var policyValidator=new PolicyValidator;if(data&&null!=data&&!1!==data.logged_in){if($("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in").hide(),$(".user_not_logged_in_comments").hide(),$("#profile_picture_box").attr("src",data.my_avatar),$(".profile_picture_box").attr("src",data.my_avatar),$("#username_box").html(data.username),$(".username_box").html(data.username),$(".js-favorites-count").html(data.my_games_count),null!=data.user_pid&&($(".js-favorites-link").attr("href","/users/"+data.user_pid+"/"+data.username),$(".js-edit-picture-link").attr("href","/users/"+data.user_pid+"/"+data.username),$(".header-email nobr").html(data.email)),null!=data.studio_slug){var slugPlaceholder="my-studio-slug",seeMyStudio=$("#account-menu-link-see-my-studio"),editMyStudio=$("#account-menu-link-edit-my-studio"),seeMyStudioUrl=seeMyStudio.attr("destination"),editMyStudioUrl=editMyStudio.attr("destination");seeMyStudioUrl&&(seeMyStudio.attr("href",seeMyStudioUrl.replace(slugPlaceholder,data.studio_slug)),seeMyStudio.show()),editMyStudioUrl&&(editMyStudio.attr("href",editMyStudioUrl.replace(slugPlaceholder,data.studio_slug)),editMyStudio.show())}$(".js-favorites-container").show(),$(".avatar").attr("src",data.my_avatar),$("#user_logged_in, .user_logged_in, .user-logged-in").show(),$("nav.navbar").addClass("logged"),Cookies.set("user_id",data.user_id,window.appInfo.commonCookieOptions),Cookies.set("user_pid",data.user_pid,window.appInfo.commonCookieOptions),Cookies.set("access_token",data.access_token,window.appInfo.commonCookieOptions),policyValidator.setControlValueFromService(data.privacy_policy_validated),$(document).trigger("user-logged-in")}else $("#user_not_logged_in, .user_not_logged_in, .user-not-logged-in").show(),$(".user_not_logged_in_comments").show(),Cookies.remove("user_id"),Cookies.remove("access_token");return policyValidator.process(),UserIdnetBonusTimer.init()},UserInfo.prototype.setFavoritesCount=function(cnt){Cookies.set("favorites_count",cnt,window.appInfo.commonCookieOptions)},UserInfo.prototype.setHeartsCount=function(cnt){Cookies.set("hearts_count",cnt,window.appInfo.commonCookieOptions)},UserInfo.prototype.getFavoritesCount=function(){return Cookies.get("favorites_count")||0},UserInfo.prototype.getHeartsCount=function(){return Cookies.get("hearts_count")||0},UserInfo.prototype.canHeart=function(){return this.getHeartsCount()<this.MAX_HEARTED_ITEMS},UserInfo}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){"use strict";var VideoRollover=function(){function VideoRollover(item){_classCallCheck(this,VideoRollover),this.item=item,this.$item=$(item)}return _createClass(VideoRollover,[{key:"appendVideo",value:function(){var $vidContainer=this.videoContainer();this.$item.find(".playable").after($vidContainer),$vidContainer.fadeIn(200)}},{key:"removeVideo",value:function(){this.$item.find(".vid-container").fadeOut(200,function(){$(this).remove()})}},{key:"video",value:function(){var mp4Source=this.$item.data("mp4-movie"),vp8Source=this.$item.data("vp8-movie"),ogvSource=this.$item.data("ogv-movie"),imgSource=this.$item.find("img.playable").attr("src"),video='<video disableRemotePlayback autoplay loop muted poster="'+this.$item.data("poster-url")+'">';return mp4Source&&(video+='<source src="'+mp4Source+'" type="video/mp4" />'),vp8Source&&(video+='<source src="'+vp8Source+'" type="video/webm" />'),ogvSource&&(video+='<source src="'+ogvSource+'" type="video/ogv" />'),imgSource&&(video+='<img src="'+imgSource+'" />'),video+="</video>",video}},{key:"videoContainer",value:function(){var vidContainer='<div style="display:none;" class="vid-container vid-container-'+this.videoContainerClass()+'">';return vidContainer+=this.video(),vidContainer+="</div>",$(vidContainer)}},{key:"videoContainerClass",value:function(){return"IE"==window.UserAgent.browser.name?"msie":"normal"}}]),VideoRollover}();global.VideoRollover=VideoRollover}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,VideoRollover){"use strict";var VideoRolloverMobile=function(_VideoRollover){function VideoRolloverMobile(item){_classCallCheck(this,VideoRolloverMobile),_get(Object.getPrototypeOf(VideoRolloverMobile.prototype),"constructor",this).call(this,item)}return _inherits(VideoRolloverMobile,_VideoRollover),_createClass(VideoRolloverMobile,[{key:"video",value:function(){var mp4Source=this.$item.data("mp4-movie");return'<video autoplay loop disableRemotePlayback playsinline webkit-playsinline muted poster="'+this.$item.data("poster-url")+'" src="'+mp4Source+'"></video>'}},{key:"videoContainerClass",value:function(){return"IE"==window.UserAgent.browser.name?"msie":"normal"}}]),VideoRolloverMobile}(VideoRollover);global.VideoRolloverMobile=VideoRolloverMobile}(window,jQuery,VideoRollover);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}};!function(global,$,VideoRollover){"use strict";function nextThumbIndex(){return this.currentThumbIndex++,this.currentThumbIndex>=this.thumbsCount&&(this.currentThumbIndex=0),this.currentThumbIndex}function to_a(attrName){return $.makeArray(this.$item.data(attrName))}function play(){var _this=this;this.timer=global.setInterval(function(){var nextIndex=nextThumbIndex.call(_this),thumb=_this.thumbs[nextIndex];_this.$item.find(".vid-container").find("img").attr("src",thumb)},ROTATION_INTERVAL)}var ROTATION_INTERVAL=1e3,ThumbRolloverMobile=function(_VideoRollover){function ThumbRolloverMobile(item){_classCallCheck(this,ThumbRolloverMobile),_get(Object.getPrototypeOf(ThumbRolloverMobile.prototype),"constructor",this).call(this,item),this.thumbs=to_a.call(this,"thumb-movie"),this.thumbsCount=this.thumbs.length,this.currentThumbIndex=0,this.timer=undefined}return _inherits(ThumbRolloverMobile,_VideoRollover),_createClass(ThumbRolloverMobile,[{key:"appendVideo",value:function(){0!=this.thumbsCount&&(_get(Object.getPrototypeOf(ThumbRolloverMobile.prototype),"appendVideo",this).call(this),play.call(this))}},{key:"video",value:function(){return'<img src="'+this.thumbs[0]+'" class="thumb">'}},{key:"removeVideo",value:function(){global.clearInterval(this.timer),_get(Object.getPrototypeOf(ThumbRolloverMobile.prototype),"removeVideo",this).call(this)}}]),ThumbRolloverMobile}(VideoRollover);global.ThumbRolloverMobile=ThumbRolloverMobile}(window,jQuery,VideoRollover);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global){"use strict";var footprints={opera:43,opera_mini:30,mobile_safari:10,safari:10,iemobile:11,firefox:28,chrome:58,ucbrowser:11.3},RolloverFactory=function(){function RolloverFactory(){_classCallCheck(this,RolloverFactory)}return _createClass(RolloverFactory,[{key:"createRollover",value:function(item){return this.canPlayMp4()?new VideoRolloverMobile(item):new ThumbRolloverMobile(item)}},{key:"canPlayMp4",value:function(){var browserName=UserAgent.browser.name.toLowerCase().replace(" ","_"),browserVersion=UserAgent.browser.major;return browserName in footprints&&browserVersion>=footprints[browserName]}}]),RolloverFactory}();global.RolloverFactory=RolloverFactory}(window);var VideoPreview=function(){var redirectToMobileUrl=function(event,item){var itemUrl=$(item).find("a").data("mobile-url");return!(itemUrl!==undefined&&itemUrl.length>0)||(event.stopImmediatePropagation(),event.preventDefault(),window.location=itemUrl,!1)};return{init:function(){var items=$(".items-grid").length>0?$(".items-grid"):$(document),deviceType=UserAgent.device.type;if("mobile"==deviceType||"tablet"==deviceType){var rollover=undefined;items.on("touchstart click","[data-mp4-movie]",function(e){if("click"==e.type)return"videotime"==appInfo.currentSkin.shortName||redirectToMobileUrl(e,this);rollover&&rollover.item==this||(rollover&&rollover.removeVideo(),rollover=(new RolloverFactory).createRollover(this),rollover.appendVideo())})}else items.on("mouseenter","[data-mp4-movie]",function(){new VideoRollover(this).appendVideo()}),items.on("mouseleave","[data-mp4-movie]",function(){new VideoRollover(this).removeVideo()})}}}();$(document).ready(function(){$("img.lazy").lazyload(),window.RecaptchaV3=new RecaptchaV3,(new UserInfo).init(),(new TopMenu).init(),(new Library).loadCounters(),(new NotificationManager).process(),LiveSearch.init(),RenderFlashMessages.init(),ItemSearch.init(),$('[data-infinite-scrolling="true"][data-base-url]').length&&$("footer").hide()});